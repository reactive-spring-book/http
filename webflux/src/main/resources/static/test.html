<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>
        this is a test
    </title>
</head>
<body>

<a href="#" id="close"> Close Session </a>

<script>

    let ws = null;

    document
        .getElementById('close')
        .addEventListener('click', (evt) => {
            console.log('click!');
            evt.preventDefault();
            ws.close();
            return false;
        });

    window
        .addEventListener('load', (e) => {
            const messagesDiv = document.getElementById('messages');
            ws = new WebSocket('ws://localhost:8080/ws/messages');
            ws.addEventListener('message', (e) => {
                const elem = document.createElement('div');
                elem.innerText = e.data;
                messagesDiv.append(elem);
                ws.send(e.data  + ' reply')
            });

        });
</script>
<div id="messages"></div>
</body>
</html>